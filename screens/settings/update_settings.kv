#:kivy 2.0.0
#:import Switch kivy.uix.switch.Switch

<UpdateSettingsScreen>:
    name: 'update_settings'
    
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 15
        
        # Header
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 60
            
            Button:
                text: '‚Üê Back'
                size_hint_x: None
                width: 100
                font_size: '16sp'
                on_press: root.go_back()
            
            Label:
                text: 'Update Settings'
                font_size: '20sp'
                font_name: 'assets/fonts/bold.ttf'
                halign: 'center'
        
        # Current Version Info
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: 120
            spacing: 10
            
            Label:
                id: current_version_label
                text: 'Current Version: 0.1.0'
                font_size: '18sp'
                font_name: 'assets/fonts/normal.ttf'
                halign: 'left'
                text_size: self.size
                size_hint_y: None
                height: 30
            
            Label:
                id: last_check_label
                text: 'Never checked for updates'
                font_size: '14sp'
                color: 0.7, 0.7, 0.7, 1
                halign: 'left'
                text_size: self.size
                size_hint_y: None
                height: 25
            
            Button:
                id: check_button
                text: 'Check for Updates'
                size_hint_y: None
                height: 50
                font_size: '16sp'
                on_press: root.check_for_updates()
        
        # Auto Update Settings
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: 100
            spacing: 10
            
            Label:
                text: 'Automatic Updates'
                font_size: '18sp'
                font_name: 'assets/fonts/bold.ttf'
                halign: 'left'
                text_size: self.size
                size_hint_y: None
                height: 30
            
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: 40
                
                Label:
                    text: 'Check for updates automatically'
                    halign: 'left'
                    text_size: self.size
                    valign: 'middle'
                
                Switch:
                    id: auto_update_switch
                    size_hint_x: None
                    width: 80
                    active: True
                    on_active: root.toggle_auto_updates(self.active)
        
        # Version History
        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            
            Label:
                text: 'Version History'
                font_size: '18sp'
                font_name: 'assets/fonts/bold.ttf'
                halign: 'left'
                text_size: self.size
                size_hint_y: None
                height: 30
            
            ScrollView:
                do_scroll_x: False
                
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: 10
                    padding: [10, 10, 10, 10]
                    
                    # Version 0.1.0 entry
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: 5
                        
                        canvas.before:
                            Color:
                                rgba: 0.2, 0.2, 0.2, 0.8
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [5]
                        
                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: 30
                            padding: [10, 5, 10, 5]
                            
                            Label:
                                text: 'v0.1.0'
                                font_size: '16sp'
                                font_name: 'assets/fonts/bold.ttf'
                                halign: 'left'
                                text_size: self.size
                                size_hint_x: 0.5
                            
                            Label:
                                text: '2025-07-06'
                                font_size: '14sp'
                                color: 0.7, 0.7, 0.7, 1
                                halign: 'right'
                                text_size: self.size
                                size_hint_x: 0.5
                        
                        Label:
                            text: 'Initial release with Docker containerization and CI/CD'
                            font_size: '14sp'
                            halign: 'left'
                            text_size: self.size
                            size_hint_y: None
                            height: self.texture_size[1]
                            padding: [10, 0, 10, 10]
        
        # Bottom spacing
        Widget:
            size_hint_y: 0.1
