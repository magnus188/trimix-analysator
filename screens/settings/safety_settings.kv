#:kivy 2.0.0

<SafetySettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
        
        # Navigation bar
        NavBar:
            title: 'Safety Settings'
            show_left_button: True
            left_button_text: '‚Üê Back'
            show_right_button: False
            left_button_callback: root.navigate_back
            navbar_height: 75
            title_font_size: 24
        
        # Scrollable settings list
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            BoxLayout:
                orientation: 'vertical'
                spacing: dp(25)
                size_hint_y: None
                height: self.minimum_height
                padding: dp(10)

                # Gas Alert Settings Section
                Label:
                    text: 'Gas Alert Settings'
                    font_size: '24sp'
                    color: 1, 1, 1, 1
                    size_hint_y: None
                    height: dp(40)
                    halign: 'left'
                    text_size: self.size

                # CO2 Alert Settings
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(10)
                    size_hint_y: None
                    height: dp(140)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: dp(40)

                        Label:
                            text: 'CO2 Alert Enabled'
                            font_size: '18sp'
                            color: 1, 1, 1, 1
                            size_hint_x: 0.7
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        CheckBox:
                            active: root.co2_alert_enabled
                            size_hint_x: 0.3
                            on_active: root.on_co2_alert_enabled_change(self.active)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: dp(40)

                        Label:
                            text: 'CO2 Alert Threshold'
                            font_size: '18sp'
                            color: 1, 1, 1, 1
                            size_hint_x: 0.7
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        Label:
                            text: f'{int(root.co2_alert_threshold)} PPM'
                            font_size: '18sp'
                            color: 1, 1, 1, 1
                            size_hint_x: 0.3
                            halign: 'right'
                            valign: 'middle'
                            text_size: self.size

                    Slider:
                        min: 400
                        max: 5000
                        step: 50
                        value: root.co2_alert_threshold
                        size_hint_y: None
                        height: dp(50)
                        on_value: root.on_co2_threshold_change(self.value)

                # CO Alert Settings
                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(10)
                    size_hint_y: None
                    height: dp(140)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: dp(40)

                        Label:
                            text: 'CO Alert Enabled'
                            font_size: '18sp'
                            color: 1, 1, 1, 1
                            size_hint_x: 0.7
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        CheckBox:
                            active: root.co_alert_enabled
                            size_hint_x: 0.3
                            on_active: root.on_co_alert_enabled_change(self.active)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: dp(40)

                        Label:
                            text: 'CO Alert Threshold'
                            font_size: '18sp'
                            color: 1, 1, 1, 1
                            size_hint_x: 0.7
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        Label:
                            text: f'{int(root.co_alert_threshold)} PPM'
                            font_size: '18sp'
                            color: 1, 1, 1, 1
                            size_hint_x: 0.3
                            halign: 'right'
                            valign: 'middle'
                            text_size: self.size

                    Slider:
                        min: 1
                        max: 100
                        step: 1
                        value: root.co_alert_threshold
                        size_hint_y: None
                        height: dp(50)
                        on_value: root.on_co_threshold_change(self.value)

                # Reset Button
                Widget:
                    size_hint_y: None
                    height: dp(30)

                Button:
                    text: 'Reset to Defaults'
                    font_size: '20sp'
                    size_hint_y: None
                    height: dp(60)
                    background_color: 0.8, 0.6, 0.2, 1
                    color: 1, 1, 1, 1
                    on_press: root.reset_to_defaults()

                # Bottom spacer
                Widget:
                    size_hint_y: None
                    height: dp(50)
